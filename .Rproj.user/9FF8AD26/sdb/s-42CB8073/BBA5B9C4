{
    "contents" : "library(rvest)\n#'getTitles function\n#'\n#'This function scrapes the titles of the papers matching the search input of the user.\n#'@param mjaSearch search URL.\n#'@export\n#'@examples\n#'getTitles()\n\ngetTitles <- function(mjaSearch){\n  titles <- mjaSearch %>%\n    html_nodes(\"#block-system-main div ol li h3 a \")%>%\n    html_text()\n  return(titles)\n}\n\n#'getLinks function\n#'\n#'This function scrapes the URLs of the papers matching the search input of the user.\n#'@param mjaSearch search URL.\n#'@export\n#'@examples\n#'getLinks()\n\ngetLinks <- function(mjaSearch){\n  links <- mjaSearch %>%\n    html_nodes(\"#block-system-main div ol li h3 a \")%>%\n    html_attr(\"href\")\n  return(links)\n}\n\n#'getAbstracts function\n#'\n#'This function scrapes the abstracts of the papers matching the search input of the user.\n#'@param links vector returned by getLinks() function.\n#'@export\n#'@examples\n#'getAbstracts()\n\ngetAbstracts <- function(links){\n  abstracts <- character(length(links))\n  for (i in 1:length(links)){\n    abstract_items <- read_html(links[i])%>%\n      html_nodes(\"div.abstract.field-items .p\")%>%\n      html_text()\n    abstracts[i]<- paste(abstract_items,collapse = \" | \")\n  }\n  return(abstracts)\n}\n\n\n#'search_MJA function\n#'\n#'This function will return the search result in the form of a matrix containing 3 columns - titles, links, abstracts of top 10 articles matching the user input.\n#'@param userQuery search keywords given by the user.\n#'@export\n#'@examples\n#'search_MJA()\n\nsearch_MJA <-function(userQuery){\n  userQueryForURL <- gsub(\" \",\"+\",userQuery)\n  baseURL <- \"https://www.mja.com.au/search/site/\"\n  articleType <- \"?f[0]=im_field_article_type%3A5269\"\n  mjaSearch <- read_html(paste(baseURL,userQuery,articleType,sep = \"\"))\n  title<-getTitles(mjaSearch)[1:10]\n  link<- getLinks(mjaSearch)[1:10]\n  abstract<-getAbstracts(link)\n  searchResult <- data.frame(title,link,abstract)\n  colnames(searchResult) <- c('title','link','abstract')\n  #searchResult<-cbind(title,link,abstract)\n  return(searchResult)\n}\n\n",
    "created" : 1434443283408.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "921871352",
    "id" : "BBA5B9C4",
    "lastKnownWriteTime" : 1434445069,
    "path" : "~/GitHub/mjar/R/mjar.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "type" : "r_source"
}